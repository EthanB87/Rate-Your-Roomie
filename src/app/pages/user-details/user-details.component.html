<app-navbar/>
<div class="parent">
  <div class="container">
    <div class="card shadow-sm border-0 rounded">
      <div class="card-body">
        <img [src]="roommate?.pfp" alt="profile picture">
        <h2 class="title">{{roommate?.firstName}} {{roommate?.lastName}} Profile</h2>
        <form id="detailsForm" [formGroup]="detailsForm">
          <div class="form-group">
            <label for="firstName">First Name</label>
            <input type="text" class="form-control" id="firstName" formControlName="firstName" name="firstName">
            @if (refFirst.invalid && (refFirst.touched || refFirst.dirty)){
              @if (refFirst.errors?.['required']) {
                <small class="text-bg-primary">First Name is required</small><br>
              }
              @if (refFirst.errors?.['minlength']) {
                <small class="text-bg-primary">Must be at least 2 letters long</small><br>
              }
              @if (refFirst.errors?.['maxlength']) {
                <small class="text-bg-primary">Must be a max of 16 letters long</small><br>
              }
            }
          </div>
          <div class="form-group">
            <label for="lastName">Last Name</label>
            <input type="text" class="form-control" id="lastName" formControlName="lastName" name="lastName">
            @if (refLast.invalid && (refLast.touched || refLast.dirty)){
              @if (refLast.errors?.['required']) {
                <small class="text-bg-primary">Last Name is required</small><br>
              }
              @if (refLast.errors?.['minlength']) {
                <small class="text-bg-primary">Must be at least 2 letters long</small><br>
              }
              @if (refLast.errors?.['maxlength']) {
                <small class="text-bg-primary">Must be a max of 16 letters long</small><br>
              }
            }
          </div>
          <div class="form-group">
            <label for="dob">Date of Birth</label>
            <input type="date" class="form-control" id="dob" formControlName="dob" name="dob">
            @if (refDob.invalid && (refDob.touched || refDob.dirty)){
              @if (refDob.errors?.['required']) {
                <small class="text-bg-primary">Date of Birth is required</small><br>
              }
            }
          </div>
          <div class="form-group">
            <label for="schoolName">School Name</label>
            <input type="text" class="form-control" id="schoolName" formControlName="schoolName" name="schoolName">
            @if (refSchool.invalid && (refSchool.touched || refSchool.dirty)){
              @if (refSchool.errors?.['required']) {
                <small class="text-bg-primary">School Name is required</small><br>
              }
              @if (refSchool.errors?.['minlength']) {
                <small class="text-bg-primary">Must be at least 10 letters long</small><br>
              }
              @if (refSchool.errors?.['maxlength']) {
                <small class="text-bg-primary">Must be a max of 25 letters long</small><br>
              }
            }
          </div>
          <div class="form-group">
            <label for="gender">I'd Prefer to Live With: </label>
            <select class="form-control" id="gender" formControlName="gender" name="gender">
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
            </select>
            @if (refGender.invalid && (refGender.touched || refGender.dirty)){
              @if (refGender.errors?.['required']) {
                <small class="text-bg-primary">Preference is required</small><br>
              }
            }
          </div>
          <div class="container">
            <div class="row justify-content-center">
              <button type="submit" class="btn btn-primary col-10 mt-5" (click)="getLocation()">Set Location</button>
            </div>
            <div>
              <div class="container" id="mapContainer" style="width: auto; height: 400px"></div>
            </div>
          </div>
          <div class="row justify-content-center">
            <div class="container" id="cameraContainer">
              <button type="submit" class="btn btn-primary mt-3 ms-2" (click)="uploadPhoto()">Upload Profile Photo</button>
              <button type="submit" class="btn btn-primary mt-3 ms-2" (click)="capturePhoto()">Take New Profile Photo</button>
            </div>
            <div class="justify-content-center">
              <button type="submit" class="btn btn-primary mt-3 ms-2" (click)="updateProfile()">Update Profile</button>
              <button type="submit" class="btn btn-primary mt-3 ms-2" (click)="deleteUser()">Delete Profile</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
